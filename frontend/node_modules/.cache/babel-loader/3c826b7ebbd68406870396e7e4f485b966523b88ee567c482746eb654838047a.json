{"ast":null,"code":"import _objectSpread from\"/home/n/repos/JanUs/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useContext,useRef,useState}from\"react\";import{useNavigate,Link}from\"react-router-dom\";import{Janus,Comet}from'../api';import UserContext from\"./UserContext\";import'../styles/RegisterForm.css';import Navbar from\"./Navbar\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const StudentRegisterForm=()=>{const INIT_STATE={firstName:\"\",lastName:\"\",username:\"\",password:\"\"};const[formData,setFormData]=useState(INIT_STATE);let error=useRef();const{setUser}=useContext(UserContext);const navigate=useNavigate();let err;const registerStudent=async()=>{let janusRes=await Janus.registerStudent(formData);if(janusRes.status===400){error.current=janusRes.message;}else{error.current=null;await Comet.createChatUser(formData.firstName,formData.username);setUser(formData.username);localStorage.setItem(\"token\",janusRes);localStorage.setItem(\"currentUser\",formData.username);localStorage.setItem('uid',formData.firstName);navigate(\"/users/\".concat(formData.username));}};let errorDiv=error.current?/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:/*#__PURE__*/_jsx(\"span\",{children:error.current})}):null;const handleChange=e=>{const{name,value}=e.target;setFormData(formData=>_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{await registerStudent();}catch(err){console.log(\"Testing error\");throw err;}setFormData(INIT_STATE);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"RegisterForm\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Student\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"RegisterForm-Form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"firstName\",children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstName\",value:formData.firstName,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"lastName\",children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username\",value:formData.username,onChange:handleChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange}),errorDiv,/*#__PURE__*/_jsx(\"button\",{children:\"Register\"}),/*#__PURE__*/_jsx(Link,{to:\"/register/teacher\",children:\"Go To Teacher Register\"})]})]})]});};export default StudentRegisterForm;","map":{"version":3,"names":["React","useContext","useRef","useState","useNavigate","Link","Janus","Comet","UserContext","Navbar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","StudentRegisterForm","INIT_STATE","firstName","lastName","username","password","formData","setFormData","error","setUser","navigate","err","registerStudent","janusRes","status","current","message","createChatUser","localStorage","setItem","concat","errorDiv","className","children","handleChange","e","name","value","target","_objectSpread","handleSubmit","preventDefault","console","log","onSubmit","htmlFor","type","onChange","to"],"sources":["/home/n/repos/JanUs/frontend/src/components/StudentRegisterForm.js"],"sourcesContent":["import React, {useContext, useRef, useState} from \"react\";\nimport { useNavigate, Link } from \"react-router-dom\";\nimport {Janus, Comet} from '../api';\nimport UserContext from \"./UserContext\";\nimport '../styles/RegisterForm.css'\nimport Navbar from \"./Navbar\";\n\n\nconst StudentRegisterForm = () => {\n\n    const INIT_STATE = {\n        firstName: \"\",\n        lastName: \"\",\n        username: \"\",\n        password: \"\"\n    }\n\n    const [formData, setFormData] = useState(INIT_STATE);\n    let error = useRef();\n    const {setUser} = useContext(UserContext)\n    const navigate = useNavigate();\n    let err;\n\n    const registerStudent = async () => {\n        let janusRes = await Janus.registerStudent(formData);\n\n        if(janusRes.status === 400) {\n            error.current = janusRes.message; \n        }\n        else {\n            error.current = null;\n            await Comet.createChatUser(formData.firstName, formData.username);\n            setUser(formData.username)\n            localStorage.setItem(\"token\", janusRes)\n            localStorage.setItem(\"currentUser\", formData.username)\n            localStorage.setItem('uid', formData.firstName)\n            navigate(`/users/${formData.username}`)\n        }\n    }\n\n    let errorDiv = error.current ? \n        <div className=\"error\">\n            <span>{error.current}</span>\n        </div>\n        :\n        null;\n\n\n    const handleChange = (e) => {\n        const {name, value} = e.target;\n        setFormData(formData => ({\n            ...formData,\n            [name]: value\n        }))\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        try {\n            await registerStudent();\n        }\n        catch(err) {\n            console.log(\"Testing error\")\n            throw err;\n        }\n        \n        setFormData(INIT_STATE);\n    }\n\n    return (\n        <>\n            <Navbar/>\n            \n            <div className=\"RegisterForm\">\n            <h1>Student</h1>\n                <form className=\"RegisterForm-Form\" onSubmit={handleSubmit}>\n                \n                <label htmlFor=\"firstName\">First Name</label>\n                    <input \n                        type=\"text\"\n                        name=\"firstName\"\n                        value={formData.firstName}\n                        onChange={handleChange}\n                    />\n                    <label htmlFor=\"lastName\">Last Name</label>\n                    <input \n                        type=\"text\"\n                        name=\"lastName\"\n                        value={formData.lastName}\n                        onChange={handleChange}\n                    />\n                    <label htmlFor=\"username\">Username</label>\n                    <input\n                        type=\"text\"\n                        name=\"username\"\n                        value={formData.username}\n                        onChange={handleChange}\n                    />\n                    <label htmlFor=\"password\">Password</label>\n                    <input\n                        type=\"password\"\n                        name=\"password\"\n                        value={formData.password}\n                        onChange={handleChange}\n                    />\n                    {errorDiv}\n                \n                    <button>Register</button>\n                    <Link to='/register/teacher'>Go To Teacher Register</Link>\n            </form>\n            \n        </div>\n        </>\n       \n    )\n}\n\nexport default StudentRegisterForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}