{"ast":null,"code":"import _objectSpread from\"/home/n/repos/JanUs/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import{Comet}from\"../api\";import MemberCard from\"./MemberCard\";import'../styles/Group.css';import Navbar from\"./Navbar\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Group=()=>{const INIT_STATE={memberuid:\"\"};const[formData,setFormData]=useState(INIT_STATE);const{guid}=useParams();const[group,setGroup]=useState();const[members,setMembers]=useState();const[trigger,setTrigger]=useState();let isTeacher=localStorage.getItem(\"isTeacher\");const navigate=useNavigate();useEffect(()=>{async function fetchGroup(){if(!isTeacher)navigate('/');let g=await Comet.getChatGroup(guid);let m=await Comet.getGroupMembers(guid);setGroup(g);if(m.data.data===[]){setMembers(null);}else{setMembers(m.data.data);}setTrigger(0);}fetchGroup();},[trigger]);let details=members?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:group.data.data.name}),/*#__PURE__*/_jsx(\"h3\",{children:\"Members\"}),members.map(member=>/*#__PURE__*/_jsx(MemberCard,{name:member.name,uid:member.uid},\"\".concat(member.name,\"-\").concat(member.uid)))]}):null;const addMemberToGroup=async()=>{await Comet.addMemberToChatGroup(guid,formData.memberuid);setTrigger(1);};const handleChange=e=>{const{name,value}=e.target;setFormData(formData=>_objectSpread(_objectSpread({},formData),{},{[name]:value}));};const handleSubmit=async e=>{e.preventDefault();await addMemberToGroup();setFormData(INIT_STATE);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"GroupMembers\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"AddMemberChatGroupForm\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"AddMemberChatGroupForm-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"memberuid\",children:\"Student First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"memberuid\",value:formData.memberuid,onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{children:\"Add to group\"})]})}),details]})]});};export default Group;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","Comet","MemberCard","Navbar","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Group","INIT_STATE","memberuid","formData","setFormData","guid","group","setGroup","members","setMembers","trigger","setTrigger","isTeacher","localStorage","getItem","navigate","fetchGroup","g","getChatGroup","m","getGroupMembers","data","details","children","name","map","member","uid","concat","addMemberToGroup","addMemberToChatGroup","handleChange","e","value","target","_objectSpread","handleSubmit","preventDefault","className","onSubmit","htmlFor","type","onChange"],"sources":["/home/n/repos/JanUs/frontend/src/components/Group.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport { Comet } from \"../api\";\nimport MemberCard from \"./MemberCard\";\nimport '../styles/Group.css'\nimport Navbar from \"./Navbar\";\n\n\nconst Group = () => {\n\n\n    const INIT_STATE = {\n        memberuid: \"\"\n    }\n\n    const [formData, setFormData] = useState(INIT_STATE);\n    const {guid} = useParams();\n    const [group, setGroup] = useState();\n    const [members, setMembers] = useState();\n    const [trigger, setTrigger] = useState();\n    let isTeacher = localStorage.getItem(\"isTeacher\");\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        async function fetchGroup() {\n            if(!isTeacher) navigate('/');\n\n            let g = await Comet.getChatGroup(guid);\n            let m = await Comet.getGroupMembers(guid);\n            \n            setGroup(g);\n            \n\n            if(m.data.data === []) {\n                setMembers(null);\n            }\n            else {\n                setMembers(m.data.data);\n            }\n            setTrigger(0);\n        }\n        fetchGroup();\n    },[trigger])\n\n    let details = members ? \n        <>\n            <h2>{group.data.data.name}</h2>\n            <h3>Members</h3>\n            {members.map(member => \n                <MemberCard\n                    key={`${member.name}-${member.uid}`}\n                    name={member.name}\n                    uid={member.uid}\n                />\n            )}\n            \n        </>\n        :\n        null\n\n    \n        const addMemberToGroup = async () => {\n            await Comet.addMemberToChatGroup(guid, formData.memberuid);\n            setTrigger(1);\n        }\n    \n        const handleChange = (e) => {\n            const {name, value} = e.target;\n            setFormData(formData => ({\n                ...formData,\n                [name]: value\n            }))\n        }\n    \n        const handleSubmit = async (e) => {\n            e.preventDefault();\n            await addMemberToGroup();\n            setFormData(INIT_STATE);\n            \n        }\n\n\n    return (\n        <>\n            <Navbar/>\n            <div className=\"GroupMembers\">\n            \n            <div className=\"AddMemberChatGroupForm\">\n            <form className=\"AddMemberChatGroupForm-form\" onSubmit={handleSubmit}>\n                <label htmlFor=\"memberuid\">Student First Name</label>\n                <input \n                    type=\"text\"\n                    name=\"memberuid\"\n                    value={formData.memberuid}\n                    onChange={handleChange}\n                />\n                <button>Add to group</button>\n            </form>\n        </div>\n            \n            {details}\n        </div>\n        </>\n        \n    )\n}\n\nexport default Group;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}