{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useParams,useNavigate,Link}from\"react-router-dom\";import{Janus,Comet}from\"../api\";import StudentCard from\"./StudentCard\";import'../styles/Course.css';import Navbar from\"./Navbar\";import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Course=()=>{const{courseId}=useParams();const[course,setCourse]=useState();const[students,setStudents]=useState();const[groups,setGroups]=useState();const[group,setGroup]=useState();const navigate=useNavigate();let isTeacher=localStorage.getItem(\"isTeacher\")?true:false;useEffect(()=>{async function fetchCourse(){let token=localStorage.getItem(\"token\");let res=await Janus.getSingleCourse(courseId,token);let students=await Janus.getAllStudentsByCourse(courseId,token);if(isTeacher){setGroup(null);let groups=await Comet.getGroupsByCourse(courseId);console.log(groups);if(groups.data.data===[]){setGroups(null);}else{setGroups(groups.data.data);}}else{setGroups(null);let group=await Comet.getGroupByStudent(localStorage.getItem(\"uid\"));if(group.data.data===[]){setGroup(null);}else{setGroup(group.data.data);}}setCourse(res.name);if(students===[]){setStudents(null);}else{setStudents(students);}}fetchCourse();},[]);let details=students?/*#__PURE__*/_jsx(_Fragment,{children:students.map(student=>/*#__PURE__*/_jsx(StudentCard,{firstName:student.firstName,lastName:student.lastName,courseId:courseId},\"\".concat(courseId,\"-\").concat(student.firstName,\"-\").concat(student.lastName)))}):null;let groupsDetails=groups?/*#__PURE__*/_jsx(_Fragment,{children:groups.map(group=>/*#__PURE__*/_jsx(Link,{to:\"/groups/\".concat(group.guid),children:group.name},\"\".concat(group.guid,\"-\").concat(group.name)))}):null;let groupDetails=group?/*#__PURE__*/_jsx(_Fragment,{children:group.map(g=>/*#__PURE__*/_jsx(Link,{to:\"/groups/\".concat(g.guid,\"/chat\"),children:g.name},\"\".concat(g.guid,\"-\").concat(g.name)))}):null;const createGroup=()=>{navigate(\"/courses/\".concat(courseId,\"/groups/create\"));};const goToGroup=()=>{navigate(\"/groups/\".concat(courseId));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"Course\",children:[/*#__PURE__*/_jsx(\"h2\",{children:course}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"Course-titles\",children:\"Students\"}),details]}),/*#__PURE__*/_jsxs(\"div\",{className:\"Course-groups\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Groups\"}),isTeacher?/*#__PURE__*/_jsx(\"button\",{onClick:createGroup,children:\"Create Group\"}):null,isTeacher?groupsDetails:groupDetails]})]})]});};export default Course;","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","Link","Janus","Comet","StudentCard","Navbar","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Course","courseId","course","setCourse","students","setStudents","groups","setGroups","group","setGroup","navigate","isTeacher","localStorage","getItem","fetchCourse","token","res","getSingleCourse","getAllStudentsByCourse","getGroupsByCourse","console","log","data","getGroupByStudent","name","details","children","map","student","firstName","lastName","concat","groupsDetails","to","guid","groupDetails","g","createGroup","goToGroup","className","onClick"],"sources":["/home/n/repos/JanUs/frontend/src/components/Course.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\nimport { Janus, Comet } from \"../api\";\nimport StudentCard from \"./StudentCard\";\nimport '../styles/Course.css';\nimport Navbar from \"./Navbar\";\n\n\n\nconst Course = () => {\n\n    const {courseId} = useParams();\n    const [course, setCourse] = useState();\n    const [students, setStudents] = useState();\n    const [groups, setGroups] = useState();\n    const [group, setGroup] = useState();\n    const navigate = useNavigate();\n    let isTeacher = localStorage.getItem(\"isTeacher\") ? true : false\n\n    useEffect(() => {\n        async function fetchCourse() {\n            let token = localStorage.getItem(\"token\");\n            let res = await Janus.getSingleCourse(courseId, token)\n            let students = await Janus.getAllStudentsByCourse(courseId, token);\n\n            if(isTeacher) {\n                setGroup(null);\n\n                let groups = await Comet.getGroupsByCourse(courseId);\n                console.log(groups)\n                if(groups.data.data === []) {\n                    setGroups(null);\n                }\n                else {\n                    setGroups(groups.data.data);\n                }\n            }\n            else {\n                setGroups(null);\n\n                let group = await Comet.getGroupByStudent(localStorage.getItem(\"uid\"));\n                if(group.data.data === []) {\n                    setGroup(null);\n                }\n                else {\n                    setGroup(group.data.data);\n                }\n            }\n            \n            setCourse(res.name);\n           \n\n            if(students === []) {\n                setStudents(null);\n            }\n            else {\n                setStudents(students);\n            }\n        }\n        fetchCourse()\n    }, [])\n\n\n    let details = students ?\n        <>\n            {students.map(student => \n                <StudentCard\n                    key={`${courseId}-${student.firstName}-${student.lastName}`}\n                    firstName={student.firstName}\n                    lastName={student.lastName}\n                    courseId={courseId}\n                />\n            )}\n        </>\n        :\n        null\n\n        let groupsDetails = groups ?\n        <>\n            \n                {groups.map(group => \n                    <Link to={`/groups/${group.guid}`} key={`${group.guid}-${group.name}`}>\n                        \n                            {group.name}\n                        \n                    </Link>)\n                }\n           \n        </>\n        :\n        null\n\n        let groupDetails = group ? \n        <>\n            {group.map(g => \n                <Link to={`/groups/${g.guid}/chat`} key={`${g.guid}-${g.name}`}>\n                    \n                        {g.name}\n                    \n                </Link>)   \n            }\n        </>\n        :\n        null\n\n\n    const createGroup = () => {\n        navigate(`/courses/${courseId}/groups/create`)\n    }\n\n    const goToGroup = () => {\n        navigate(`/groups/${courseId}`)\n    }\n\n    return (\n        <>\n            <Navbar/>\n            <div className=\"Course\">\n            <h2>{course}</h2>\n            \n            \n            <div>\n                <h3 className=\"Course-titles\">Students</h3>\n                {details}\n            </div>\n            <div className=\"Course-groups\">\n                <h3>Groups</h3>\n                {isTeacher ? \n            <button onClick={createGroup}>Create Group</button>\n             : \n             null}\n                {isTeacher ? groupsDetails : groupDetails}\n            </div>\n        </div>\n        </>\n        \n    )\n\n}\n\nexport default Course;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}